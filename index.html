<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æœ‰ç©ºä¾†æ™ƒï¼“ï¼ï¼‘GonnaPlus(æ¾è¸åº—ï¼‰é»é¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .disabled-overlay {
            filter: grayscale(1);
            opacity: 0.5;
            pointer-events: none;
        }

        .active-ring {
            border: 2px solid #ea580c !important;
        }

        .price-tag {
            color: #ea580c;
            font-weight: bold;
        }
    </style>
</head>

<body class="bg-stone-100 p-2 pb-10 font-sans">
    <div class="max-w-md mx-auto bg-white rounded-3xl shadow-lg overflow-hidden border border-gray-200">
        <div class="p-4 bg-orange-600 text-white flex justify-between items-center">
            <div>
                <h1 class="text-xl font-black italic tracking-tighter">æœ‰ç©ºä¾†æ™ƒ</h1>
                <p class="text-[10px] opacity-80">ï¼“ï¼ï¼‘GonnaPlus(æ¾è¸åº—ï¼‰é»é¤</p>
            </div>
            <div class="text-right">
                <p class="text-[10px] opacity-70 leading-none mb-1">é ä¼°ç¸½è¨ˆ(å«æœå‹™è²»)</p>
                <span id="grandTotalDisplay" class="text-2xl font-mono font-bold">$0</span>
            </div>
        </div>

        <div class="p-4 space-y-4">
            <div class="space-y-1">
                <label class="text-[10px] font-black text-orange-600 ml-1 uppercase">Step 1. Family Name å®¶åº­ç¨±å‘¼</label>
                <input type="text" id="familyName" oninput="checkLock()"
                    class="w-full border-2 border-orange-100 rounded-2xl p-3 focus:border-orange-500 outline-none text-base bg-orange-50/30"
                    placeholder="ä¾‹å¦‚ï¼šæ—å®¶ / ç‹å°æ˜ä¸€å®¶">
            </div>

            <div id="membersContainer" class="space-y-4"></div>

            <div id="actionButtons" class="space-y-3 pt-2 disabled-overlay">
                <button type="button" onclick="addMember()"
                    class="w-full bg-orange-100 text-orange-700 font-bold py-3 rounded-2xl flex items-center justify-center gap-2 active:scale-95 transition">
                    ğŸ‘¤ æ–°å¢ä¸‹ä¸€ä½æˆå“¡
                </button>
                <button type="button" onclick="generateOrder()"
                    class="w-full bg-gray-900 text-white font-bold py-4 rounded-2xl shadow-xl active:scale-95 transition text-lg">
                    è¤‡è£½è¨‚å–® (è²¼è‡³ LINE)
                </button>
                <p class="text-center text-[10px] text-gray-400">é»æ“Šã€Œè¤‡è£½ã€å¾Œå°‡è‡ªå‹•ç§»é™¤é‡‘é¡ï¼Œæ–¹ä¾¿çµ±è¨ˆå“é …</p>
            </div>
        </div>
    </div>

    <template id="memberTemplate">
        <div
            class="member-block border-2 border-gray-100 rounded-3xl overflow-hidden bg-white shadow-sm transition-all">
            <div class="p-4 bg-gray-50 border-b border-gray-100">
                <label class="text-[10px] font-black text-gray-400 block mb-1 uppercase">Step 2. Who is this?
                    æˆå“¡å§“å</label>
                <input type="text"
                    class="m-name w-full font-bold bg-white border border-gray-200 rounded-xl p-2 outline-none focus:active-ring shadow-inner"
                    placeholder="è«‹è¼¸å…¥å§“å" oninput="checkMemberLock(this)">
            </div>

            <div class="member-content p-4 space-y-4 disabled-overlay">
                <div class="m-items-list space-y-4"></div>
                <button type="button" onclick="addItemRow(this)"
                    class="w-full py-2 border-2 border-dashed border-gray-200 rounded-xl text-sm text-blue-500 font-bold active:bg-blue-50">+
                    å¢åŠ é¤é»/é£²å“</button>
            </div>
            <button onclick="removeMember(this)" class="w-full text-[10px] text-red-300 py-2">ç§»é™¤æ­¤æˆå“¡</button>
        </div>
    </template>

    <template id="itemTemplate">
        <div class="item-row bg-stone-50 p-3 rounded-2xl relative border border-gray-100">
            <div class="space-y-2">
                <select class="i-cat w-full p-2 rounded-lg border border-gray-200 text-sm bg-white"
                    onchange="syncItems(this)">
                    <option value="">é¸æ“‡åˆ†é¡</option>
                    <option value="bowl">1. ç¢—æ²™æ‹‰</option>
                    <option value="small">2. å°ç›¤åˆ†äº«èœ</option>
                    <option value="pasta">3. ç¾©å¤§åˆ©éºµ/ç‡‰é£¯</option>
                    <option value="protein">4. å¥½çš„è›‹ç™½è³ª</option>
                    <option value="sweet">5. è‡ªè£½ç”œé»</option>
                    <option value="drink_gen">6. é£²å“/æ°£æ³¡æ°´</option>
                    <option value="drink_juice">7. å¤©ç„¶æœæ±</option>
                    <option value="drink_tea">8. TEA èŒ¶é¡</option>
                    <option value="drink_coffee">9. COFFEE å’–å•¡</option>
                </select>
                <select
                    class="i-dish w-full p-2 rounded-lg border border-gray-200 text-sm bg-white font-medium"></select>
                <input type="text" class="i-note w-full p-2 rounded-lg border border-gray-200 text-xs"
                    placeholder="å‚™è¨» (å¦‚ï¼šå»å†°/ä¸è”¥/éæ•)">
            </div>
            <button onclick="removeItem(this)"
                class="absolute -right-1 -top-1 bg-white border border-gray-200 text-gray-400 rounded-full w-6 h-6 flex items-center justify-center shadow-sm">âœ•</button>
        </div>
    </template>

    <script>
        const menuData = {
            "bowl": [{ n: "å¥åº·å‘³å™Œæ²¹é†‹ç¾½è¡£ç”˜è—æ²™æ‹‰", p: 430 }, { n: "è¶…ç¾éº—å¥³ç¥é…ªæ¢¨æ²™æ‹‰", p: 450 }, { n: "æ–°é®®ç„¡èŠ±æœçƒ¤é›è‚‰æº«æ²™æ‹‰", p: 480 }, { n: "çƒ¤é‡èœæŸ‘æ©˜é´¨èƒ¸æº«æ²™æ‹‰", p: 480 }, { n: "è¥¿ç­ç‰™ç”Ÿç«è…¿ä½æ–°é®®å¸ƒæ‹‰å¡”", p: 480 }],
            "small": [{ n: "é¯·é­šç‚’é’èŠ±èœä½æ«»èŠ±è¦", p: 190 }, { n: "ç‚™çƒ¤ç‰ç±³æ’ä½è—ç´‹ä¹³é…ª", p: 190 }, { n: "é…¥é¦™å—ç“œä½ç™½æ¾éœ²èˆ‡å„ªæ ¼", p: 210 }, { n: "é¦¬éˆ´è–¯çƒ˜è›‹ä½è¥¿è¥¿é‡Œç‡‰èœ", p: 210 }, { n: "è¶…ç¯€æ¢è–¯æ¢èˆ‡æ¾éœ²è›‹é»ƒé†¬", p: 240 }, { n: "æ‰‹ä½œå¤©ç„¶é…µæ¯éºµåŒ…ç›¤", p: 240 }, { n: "ç‚™çƒ¤ç™½èŠ±æ¤°èœä½è²»é”ä¹³é…ª", p: 240 }, { n: "æ–°é®®é…ªæ¢¨èˆ‡å°åŒ—æœ€å¥½çš„é…¸éºµåŒ…", p: 240 }, { n: "æ²¹æ¼¬è•ƒèŒ„ç”Ÿç«è…¿æ™®åˆ‡å¡”", p: 240 }, { n: "å¸ƒæ‹‰å¡”ä¹³é…ªèˆ‡å°åŒ—æœ€å¥½çš„é…¸éºµåŒ…", p: 270 }, { n: "ç¶“å…¸å„ªæ ¼ç‡•éº¥ç‚¸é›å€‘", p: 320 }, { n: "é‚£ä¸å‹’æ–¯é¢¨å‘³ç‚™çƒ¤ç« é­š", p: 320 }, { n: "çˆçƒ¤å¸ƒé‡Œä¹³é…ªä½æ–°é®®ç„¡èŠ±æœ", p: 320 }, { n: "æ²¹å°å»£å³¶ç‰¡è £ä½å¤§è’œéºµåŒ…", p: 320 }, { n: "ç‚™ç‡’æµ·è¦ç¾½è¡£ç”˜è—", p: 350 }, { n: "ç¾©å¼æœè˜­å°éº¥é…¥ç‚¸ä¸­å·", p: 350 }, { n: "å¤§è’œå¥¶æ²¹ç‡´æ·¡èœ", p: 350 }, { n: "æ¯æ—¥è‡ªè£½ç²¾é¸æ¹¯", p: 120 }],
            "pasta": [{ n: "åŸ¹æ ¹è›‹é»ƒå¤§æ°´ç®¡éºµ", p: 390 }, { n: "ç†±é‚£äºé’é†¬èˆ‡çµ²çµ¨ä¹³é…ªç´å¼¦éºµ", p: 390 }, { n: "æ—¥æ›¬è•ƒèŒ„é‡èœè£¸éº¥ç·å¸¶éºµ", p: 390 }, { n: "è›¤èœŠèˆ‡æ«»èŠ±è¦å¢¨é­šç´å¼¦éºµ", p: 460 }, { n: "æ¾éœ²é‡è‡é›è‚‰ç·å¸¶éºµ", p: 460 }, { n: "æ…¢æ…¢ç‡‰ç‰›é °è‚‰å¤§æ°´ç®¡éºµ", p: 460 }, { n: "å—ç¾©æµ·é®®å¤šå¤šå¢¨é­šç´å¼¦éºµ", p: 520 }, { n: "æ«»æ¡ƒé´¨èƒ¸ä½ç´…é…’ç”œèœæ³•ç¾…éº¥ç‡‰é£¯", p: 520 }, { n: "æ —å­é‡è‡æ³•ç¾…éº¥ç‡‰é£¯", p: 590 }, { n: "è¶…æ¾æ¹ƒæµ·é®®æ³•ç¾…éº¥ç‡‰é£¯", p: 590 }],
            "protein": [{ n: "gonna+ å’Œç‰›æ¼¢å ¡èˆ‡è–¯æ¢", p: 680 }, { n: "ä¹¾å¼ç†Ÿæˆé»‘æ¯›è±¬é‡Œè‚Œä½ç„¡èŠ±æœä¹¾é†¬æ±", p: 720 }, { n: "è¥¿è¥¿é‡Œéµé‹çƒ¤é­šä½é·¹å˜´è±†æ³¥", p: 720 }, { n: "ç«çƒ¤ç´è¥¿è˜­ç¾”ç¾Šæ’ä½é˜¿æ ¹å»·é’é†¬", p: 920 }, { n: "æ¾³æ´²è‚‹çœ¼å¿ƒ 8oz ä½é’é†¬èˆ‡å¤§è’œè–¯æ¢", p: 980 }, { n: "æ¾³æ´²å®‰æ ¼æ–¯è€é¥•ç‰›æ’ 8oz èˆ‡ç‰ç±³ç³•", p: 1280 }],
            "sweet": [{ n: "ææ‹‰ç±³è˜‡", p: 180 }, { n: "èƒ¡è˜¿è””è›‹ç³•", p: 190 }, { n: "éµè§€éŸ³æ¥Šæ¡ƒæˆšé¢¨è›‹ç³•", p: 190 }, { n: "ç¥ç€å¥¶èŒ¶å·´æ–¯å…‹", p: 280 }, { n: "æ£®éŸ»æŠ¹èŒ¶æ —å­æˆšé¢¨", p: 280 }, { n: "ç„¦ç³–æµ·é¹½å¸ƒæœ—å°¼èˆ‡é¦™è‰å†°æ·‡æ·‹", p: 280 }, { n: "ä¼¯çˆµèŒ¶å‡è˜‹æœå¸•è²", p: 360 }],
            "drink_gen": [{ n: "å·§å…‹åŠ›æ­è•¾ (å†°/ç†±)", p: 180 }, { n: "é»‘ç³–æ­è•¾ (å†°/ç†±)", p: 180 }, { n: "Zesteaåº·æ™®èŒ¶", p: 190 }, { n: "è–æ²›é»æ´›æ°£æ³¡ç¤¦æ³‰æ°´", p: 150 }, { n: "æ™®å¨œå¤©ç„¶ç¤¦æ³‰æ°´", p: 150 }],
            "drink_juice": [{ n: "æ©˜ - èƒ¡è˜¿è””è˜‹æœæ±", p: 170 }, { n: "é»ƒ - é³³æ¢¨èŠå§†æ±", p: 170 }, { n: "ç´« - ç”œèœæ ¹è˜‹æœæ±", p: 170 }],
            "drink_tea": [{ n: "æ³•å¼è—ä¼¯çˆµèŒ¶", p: 180 }, { n: "æ­ŒåŠ‡é™¢æ°´æœç¶ èŒ¶", p: 180 }, { n: "ç´…è‰²é¦¬å¯æ³¢ç¾…èŒ¶", p: 180 }, { n: "å—éæ³¢æœ¬é¦™è‰èŒ¶", p: 180 }],
            "drink_coffee": [{ n: "æ¿ƒç¸®å’–å•¡", p: 150 }, { n: "ç¾å¼å’–å•¡", p: 150 }, { n: "æ‹¿éµ", p: 180 }, { n: "å¡å¸ƒå¥‡è«¾", p: 180 }, { n: "è¥¿è¥¿é‡Œå’–å•¡", p: 190 }, { n: "æ‘©å¡", p: 190 }, { n: "è‚‰æ¡‚æ‹¿éµ", p: 190 }, { n: "é»‘ç³–æ‹¿éµ", p: 190 }]
        };

        function checkMemberLock(input) {
            const content = input.parentElement.nextElementSibling;
            if (input.value.trim() !== "") {
                content.classList.remove('disabled-overlay');
                input.classList.add('active-ring');
            } else {
                content.classList.add('disabled-overlay');
                input.classList.remove('active-ring');
            }
            checkLock();
        }

        function checkLock() {
            const familyName = document.getElementById('familyName').value.trim();
            const anyName = Array.from(document.querySelectorAll('.m-name')).some(i => i.value.trim() !== "");
            const buttons = document.getElementById('actionButtons');
            if (familyName !== "" && anyName) {
                buttons.classList.remove('disabled-overlay');
            } else {
                buttons.classList.add('disabled-overlay');
            }
        }

        function addMember() {
            const container = document.getElementById('membersContainer');
            const clone = document.getElementById('memberTemplate').content.cloneNode(true);
            const memberDiv = clone.querySelector('.member-block');
            container.appendChild(clone);
            addItemRow(memberDiv.querySelector('button[onclick="addItemRow(this)"]'));
            checkLock();
        }

        function removeMember(btn) {
            btn.closest('.member-block').remove();
            updateTotal();
            checkLock();
        }

        function addItemRow(btn) {
            const list = btn.previousElementSibling;
            list.appendChild(document.getElementById('itemTemplate').content.cloneNode(true));
            updateTotal();
        }

        function removeItem(btn) {
            btn.parentElement.remove();
            updateTotal();
        }

        function syncItems(catSelect) {
            const dishSelect = catSelect.nextElementSibling;
            const cat = catSelect.value;
            if (!cat) return;
            // ä»‹é¢ä¸Šé¡¯ç¤ºé‡‘é¡
            dishSelect.innerHTML = menuData[cat].map(item => `<option value="${item.n}" data-price="${item.p}">${item.n} ($${item.p})</option>`).join('');
            updateTotal();
        }

        function updateTotal() {
            let subtotal = 0;
            document.querySelectorAll('.i-dish').forEach(s => {
                if (s.selectedOptions[0]) subtotal += parseInt(s.selectedOptions[0].dataset.price || 0);
            });
            const total = subtotal + Math.round(subtotal * 0.1);
            document.getElementById('grandTotalDisplay').innerText = `$${total}`;
        }

        function generateOrder() {
            const familyName = document.getElementById('familyName').value.trim();
            const blocks = document.querySelectorAll('.member-block');
            let text = `ğŸ  ã€Gonna+ é»é¤ï¼š${familyName}ä¸€å®¶äººã€‘\n`;

            blocks.forEach((block, i) => {
                const name = block.querySelector('.m-name').value.trim();
                if (!name) return;
                text += `ğŸ‘¤ ${name}ï¼š\n`;
                block.querySelectorAll('.item-row').forEach(item => {
                    const dishEl = item.querySelector('.i-dish');
                    if (dishEl.value) {
                        const note = item.querySelector('.i-note').value.trim();
                        // é€™è£¡åªå–å“é …åç¨±ï¼Œä¸å–æ‹¬è™Ÿå…§çš„é‡‘é¡
                        text += `  â—¦ ${dishEl.value}\n`;
                        if (note) text += `    å‚™è¨»ï¼š${note}\n`;
                    }
                });
                if (i < blocks.length - 1) text += ` â”ˆâ”ˆâ”ˆâ”ˆâ”ˆ\n`;
            });
            navigator.clipboard.writeText(text).then(() => { alert('è¨‚å–®å·²è¤‡è£½(ä¸å«é‡‘é¡)ï¼'); });
        }

        addMember();
    </script>
</body>

</html>